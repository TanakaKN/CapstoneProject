{% extends "base.html" %}

{% block content %}
<h2>Plan Details</h2>

<p><strong>Name:</strong> {{ plan.name }}</p>
<p><strong>Target:</strong> {{ plan.target_amount }}</p>
<p><strong>Total Saved:</strong> {{ plan.total_saved }}</p>

<hr>

<h3>Edit Plan</h3>
<form method="post">
  {% csrf_token %}
  <p>
    <label>Plan Name</label><br>
    <input type="text" name="name" value="{{ plan.name }}">
  </p>

  <p>
    <label>Target Amount</label><br>
    <input type="number" step="0.01" name="target_amount" value="{{ plan.target_amount }}">
  </p>

  <button type="submit">Update Plan</button>
</form>

<hr>

<h3>Add Contribution</h3>

<form method="post">
  {% csrf_token %}
  <input type="number" step="0.01" name="amount" placeholder="Amount" required>
  <button type="submit">Add Money</button>
</form>

<hr>

<h3>Withdraw Money</h3>

<form method="post">
  {% csrf_token %}
  <input type="number" step="0.01" name="withdraw_amount" placeholder="Amount" required>
  <button type="submit">Withdraw</button>
</form>
<hr>

<h3>Contribution History</h3>

<ul>
  {% for contribution in contributions %}
    <li>
      {% if contribution.amount < 0 %}
        Withdrawn {{ contribution.amount|cut:"-" }}
      {% else %}
        Added {{ contribution.amount }}
      {% endif %}
      on {{ contribution.created_at|date:"Y-m-d H:i" }}
    </li>
  {% empty %}
    <li>No transactions yet.</li>
  {% endfor %}
</ul>

<a href="{% url 'plans' %}">â¬… Back to Plans</a>
{% endblock %}
